name: Change content in file into another

on:
  push:
    paths: 
      - 'change_content/*'
      - '.github/workflows/change_content.yml'

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v3

      - name: Run a one-line script
        run: |
          #cat tag_html.md
          #regex=(?<=play-services-ads:)(\d+[.]\d+[.]\d+)
          
          GAD_SDK_VERSION=$(cat correct_content.gdap | perl -ne 'print $1 if /(?<=play-services-ads:)(\d+[.]\d+[.]\d+)/s')
          perl -pi -e "s/(?<=<img.id=\"androidVersion\".src=\"https:\/\/img.shields.io\/badge\/GAD%20SDK%20Android-v)(.*)(?=-informational\"\/>)/$GAD_SDK_VERSION/g" tag_html.md
          cat tag_html.md
        working-directory: change_content
      
      #- name: Git Auto Commit
      #  uses: stefanzweifel/git-auto-commit-action@v4.15.0
      #  with:
      #    commit_message: Automated Change
